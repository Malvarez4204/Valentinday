<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Contrato Solo Nosotros ğŸ’™</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
    body { font-family: 'Poppins', sans-serif; background: radial-gradient(circle at top, #d0e7ff, #89c2ff); min-height: 100vh; margin: 0; display: flex; justify-content: center; align-items: center; overflow: hidden; }
    .container { background: white; width: 90%; max-width: 400px; padding: 20px; border-radius: 25px; text-align: center; box-shadow: 0 15px 35px rgba(30, 58, 138, 0.2); position: relative; }
    h1 { color: #1e3a8a; font-size: 20px; margin-bottom: 10px; }
    .days-counter { background: #e7f3ff; color: #1e3a8a; padding: 10px; border-radius: 15px; font-weight: 600; margin-bottom: 15px; font-size: 13px; border: 1px solid #c0dfff; }
    input { padding: 12px; border-radius: 20px; border: 2px solid #89c2ff; width: 85%; text-align: center; outline: none; font-size: 16px; }
    button { margin-top: 10px; padding: 12px 20px; border: none; border-radius: 25px; background: linear-gradient(135deg, #4dabf7, #1e3a8a); color: white; font-weight: bold; cursor: pointer; width: 80%; }
    .contract { display: none; text-align: left; font-size: 12px; margin-top: 15px; line-height: 1.5; }
    #gameContainer { display: none; margin-top: 15px; border-top: 2px dashed #1e3a8a; padding-top: 10px; }
    #gameCanvas { background: #fdfdfd; border-radius: 12px; border: 2px solid #e7f3ff; display: block; margin: 0 auto; max-width: 100%; height: auto; touch-action: none; }
    #successMessage { display: none; margin-top: 20px; }
    #noBtn { position: absolute; width: auto; padding: 8px 15px; z-index: 10; transition: all 0.2s ease; }
    #valentinSection { display: none; }
</style>
</head>
<body>

<div class="container" id="box">
    <h1>ğŸ’™ Solo Nosotros, Itziar ğŸ’™</h1>
    <div class="days-counter" id="dayCounter">Cargando amor...</div>
    <div class="heart" id="heart" style="font-size:35px; margin:5px 0;">ğŸ¤ğŸ¤ğŸ¤ğŸ¤ğŸ¤</div>

    <div id="quizSection">
        <p id="questionText" style="font-size: 14px;"></p>
        <input type="text" id="answer" placeholder="Responde aquÃ­ ğŸ’Œ" autocomplete="off">
        <br>
        <button onclick="checkAnswer()">Responder</button>
        <p id="error" style="color:red; font-size: 11px; height: 12px;"></p>
    </div>

    <div id="valentinSection">
        <h2 style="color: #d9480f;">ğŸ’Œ Una Ãºltima pregunta...</h2>
        <p style="font-size: 16px; font-weight: bold;">Â¿Quieres ser mi ValentÃ­n hoy y siempre? ğŸŒ¹</p>
        <button onclick="valentinAceptado()" style="background: linear-gradient(135deg, #ff6b6b, #d9480f);">Â¡SÃ, QUIERO! â¤ï¸</button>
    </div>

    <div class="contract" id="contract">
        <h2 style="text-align: center; font-size: 18px;">ğŸ“œ CONTRATO OFICIAL ğŸ’</h2>
        <p>Yo, Itziar, acepto: <br>
            ğŸ’™ Tomar tu mano siempre. <br>
            ğŸ’™ <strong>Tratarte como rey.</strong> ğŸ‘‘ <br>
            ğŸ’™ <strong>Hacerte piojito.</strong> ğŸ’†â€â™‚ï¸ <br>
            ğŸ’™ Inicio: 13/11/2025. <br>
            ğŸ’™ <strong>Obedecerte</strong> (en lo feliz). ğŸ˜‰ <br>
            ğŸ’™ Darte <strong>mucho amor</strong> diario. ğŸ§¸ <br>
            ğŸ’™ <strong>Nadia es especial para nosotros.</strong> âœ¨ <br><br>
            <strong>Â¡La mejor pareja! ğŸ’˜</strong>
        </p>

        <div id="signatureBox" style="display:none; text-align:center;">
            <input type="text" id="signature" placeholder="Escribe Itziar">
            <button onclick="signContract()">Firmar y Guardar Contrato ğŸ“„</button>
        </div>

        <div style="text-align: center; height: 80px; position: relative;" id="finalChoice">
            <button id="yesBtn" onclick="showSignature()" style="width: 100%;">SÃ, ACEPTO EL CONTRATO ğŸ’™</button>
            <button id="noBtn">No</button>
        </div>
    </div>

    <div id="successMessage">
        <h3 style="color: #2b8a3e;">âœ… Â¡Contrato Firmado!</h3>
        <p style="font-size: 13px;">Se ha descargado tu copia oficial ğŸ“„</p>
        <button onclick="startChallenge()" style="background: linear-gradient(135deg, #f08c00, #d9480f);">Â¿Lista para un reto? Ir al juego ğŸ®</button>
    </div>

    <div id="gameContainer">
        <p style="font-size: 11px;">Toca el cuadro para saltar (10s)</p>
        <div id="timer">Tiempo: 0s</div>
        <canvas id="gameCanvas" width="300" height="120"></canvas>
        <div id="secretCode" style="display:none; color: #d9480f; font-size: 18px; font-weight: bold; margin-top: 10px; background: #fff4e6; padding: 10px; border-radius: 10px;">ğŸ”“ CÃ“DIGO REGALO: 638</div>
    </div>
</div>

<script>
// --- PDF ---
async function generarPDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    doc.setDrawColor(30, 58, 138); doc.rect(10, 10, 190, 277);
    doc.setTextColor(30, 58, 138); doc.setFontSize(22);
    doc.text("CONTRATO DE AMOR ETERNO", 105, 40, { align: "center" });
    doc.setFontSize(14); doc.setTextColor(0, 0, 0);
    const texto = ["Yo, Itziar, acepto formalmente los siguientes terminos:","", "- Tomar tu mano siempre.", "- Tratarte como el Rey que eres.", "- Hacerte piojito siempre.", "- Inicio: 13 de Noviembre de 2025.", "- Nadia es especial para nosotros.", "", "Firmado el 14 de Febrero de 2026."];
    doc.text(texto, 30, 60);
    doc.save("Contrato_Itziar.pdf");
}

// --- LOGICA ---
let current=0, hearts=0;
const questions = [
    { q:"Â¿QuiÃ©n canta: 'Hace tiempo que no agarro a nadie de la mano...'?", a:"Bad Bunny", caseSensitive:true },
    { q:"Fecha de inicio (DD/MM/AAAA)", a:"13/11/2025", caseSensitive:false },
    { q:"Mi color favorito", a:"azul", caseSensitive:false },
    { q:"Nombre especial", a:"Nadia", caseSensitive:true },
    { q:"Cantante favorito", a:"Bad Bunny", caseSensitive:true }
];

function checkAnswer(){
    let input=document.getElementById("answer"), user=input.value.trim(), correct=questions[current].a;
    if(!questions[current].caseSensitive){ user=user.toLowerCase(); correct=correct.toLowerCase(); }
    if(user===correct){
        hearts++; document.getElementById("heart").textContent="ğŸ’™".repeat(hearts)+"ğŸ¤".repeat(5-hearts);
        input.value=""; current++;
        if(current<questions.length) document.getElementById("questionText").textContent=questions[current].q;
        else { document.getElementById("quizSection").style.display="none"; document.getElementById("valentinSection").style.display="block"; }
    } else { document.getElementById("error").textContent="PiÃ©nsalo bien ğŸ˜"; }
}

function valentinAceptado() {
    confetti({particleCount: 150, spread: 100});
    document.getElementById("valentinSection").style.display="none";
    document.getElementById("contract").style.display="block";
}

function showSignature(){
    document.getElementById("signatureBox").style.display="block";
    document.getElementById("finalChoice").style.display="none";
}

function signContract(){
    if(document.getElementById("signature").value.trim()==="Itziar"){
        generarPDF();
        confetti({particleCount:100});
        document.getElementById("contract").style.display="none";
        document.getElementById("successMessage").style.display="block";
    } else { alert("Escribe 'Itziar' ğŸ˜Œ"); }
}

function startChallenge() {
    document.getElementById("successMessage").style.display="none";
    document.getElementById("gameContainer").style.display="block";
    initGame();
}

// LÃ³gica de No y Juego omitida por brevedad pero incluida en el archivo final
const noBtn=document.getElementById("noBtn"), box=document.getElementById("box");
noBtn.addEventListener("mouseover", () => {
    noBtn.style.left=Math.random()*(box.clientWidth - 80)+"px";
    noBtn.style.top=Math.random()*(box.clientHeight - 80)+"px";
});

function initGame(){
    const canvas = document.getElementById("gameCanvas"), ctx = canvas.getContext("2d");
    let gameActive = true, startTime = Date.now();
    const dino = { x: 30, y: 90, w: 20, h: 20, dy: 0, jumpForce: 8, gravity: 0.5, grounded: false };
    const obstacles = [];
    let timerObs = 0;
    function update() {
        if(!gameActive) return;
        let elapsed = Math.floor((Date.now() - startTime) / 1000);
        document.getElementById("timer").textContent = "Tiempo: " + elapsed + "s";
        if(elapsed >= 10) { gameActive = false; document.getElementById("secretCode").style.display = "block"; confetti({particleCount:50}); return; }
        if (!dino.grounded) { dino.dy += dino.gravity; dino.y += dino.dy; }
        if (dino.y + dino.h > canvas.height) { dino.y = canvas.height - dino.h; dino.dy = 0; dino.grounded = true; }
        timerObs++; if (timerObs % 80 === 0) obstacles.push({ x: canvas.width, y: 100, w: 15, h: 20 });
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = "#1e3a8a"; ctx.fillRect(dino.x, dino.y, dino.w, dino.h);
        obstacles.forEach((obs, i) => {
            obs.x -= 4; ctx.fillStyle = "#ff6b6b"; ctx.fillRect(obs.x, obs.y, obs.w, obs.h);
            if (dino.x < obs.x + obs.w && dino.x + dino.w > obs.x && dino.y < obs.y + obs.h && dino.y + dino.h > obs.y) { obstacles.length = 0; startTime = Date.now(); }
            if (obs.x + obs.w < 0) obstacles.splice(i, 1);
        });
        requestAnimationFrame(update);
    }
    canvas.addEventListener("touchstart", (e) => { e.preventDefault(); if (dino.grounded) { dino.dy = -dino.jumpForce; dino.grounded = false; } });
    update();
}

const startDate = new Date('2025-11-13T00:00:00');
const diffDays = Math.floor((new Date() - startDate) / (1000 * 60 * 60 * 24));
document.getElementById('dayCounter').innerHTML = `ğŸ’™ ${diffDays} dÃ­as de pura felicidad ğŸ’™`;
document.getElementById("questionText").textContent=questions[0].q;
</script>
</body>
</html>